{% extends "index.html" %} {% load static %} {% block title %}Setting User
Profile | Nustrat Admadiyya College{% endblock title %} {% block content %}

<div class="container userprofile-container">
    <form
        method="POST"
        enctype="multipart/form-data"
        class="card profile-card p-4 shadow-lg border-0"
        style="width: 100%; max-width: 800px"
    >
        {% csrf_token %}
        <div class="row">
            <!-- Profile Picture Column -->
            <div class="col-md-5 d-flex justify-content-center mb-4">
                <div class="image-wrapper">
                    <img
                        src="#"
                        alt="Profile Picture"
                        class="userprofile-image shadow-lg"
                        id="profilePicturePreview"
                        style="display: none"
                    />
                    <div
                        id="placeholder"
                        class="placeholder-image"
                        onclick="document.getElementById('profilePictureInput').click();"
                    >
                        <span id="placeholderText">Click to upload image</span>
                    </div>
                    <div id="profilePictureForm" style="display: none">
                        <input
                            type="file"
                            name="image"
                            id="profilePictureInput"
                            accept="image/*"
                            onchange="previewProfilePicture(event);"
                        />
                    </div>
                </div>
            </div>

            <!-- Profile Details Column -->
            <div class="col-md-7">
                <div class="text-center mb-4">
                    <h4 class="font-weight-bold" style="color: #333">
                        {{ user.username }}
                    </h4>
                    <small class="text-muted"
                        >Member since {{ user.date_joined|date:"F Y" }}</small
                    >
                </div>

                <div class="card-body p-5">
                    <div class="d-flex flex-column gap-3">
                        <div class="form-group">
                            <label
                                for="first_name"
                                class="font-weight-semibold text-muted"
                                >First Name</label
                            >
                            <input
                                type="text"
                                class="form-control input-field form-control-lg"
                                id="first_name"
                                name="first_name"
                                value="{{ user.first_name }}"
                                placeholder="Enter your first name"
                            />
                        </div>
                        <div class="form-group">
                            <label
                                for="last_name"
                                class="font-weight-semibold text-muted"
                                >Last Name</label
                            >
                            <input
                                type="text"
                                class="form-control input-field form-control-lg"
                                id="last_name"
                                name="last_name"
                                value="{{ user.last_name }}"
                                placeholder="Enter your last name"
                            />
                        </div>
                        <div class="form-group">
                            <label
                                for="phone"
                                class="font-weight-semibold text-muted"
                                >Phone Number</label
                            >
                            <input
                                type="text"
                                class="form-control input-field form-control-lg"
                                id="phone"
                                name="phone"
                                value="{{ user.phone }}"
                                placeholder="Enter your phone number"
                            />
                        </div>
                        <div class="form-group">
                            <label
                                for="email"
                                class="font-weight-semibold text-muted"
                                >Email</label
                            >
                            <input
                                type="email"
                                class="form-control input-field form-control-lg"
                                id="email"
                                name="email"
                                value="{{ user.email }}"
                                placeholder="Enter your email"
                            />
                        </div>

                        <button
                            type="submit"
                            class="btn btn-primary mt-4 w-100"
                        >
                            Update Profile
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- JavaScript for Image Preview -->
<script>
    function previewProfilePicture(event) {
        const reader = new FileReader();
        reader.onload = function () {
            const output = document.getElementById("profilePicturePreview");
            output.src = reader.result;
            output.style.display = "block";
            document.getElementById("placeholder").style.display = "none";
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>

{% endblock content %}
